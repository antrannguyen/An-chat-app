[{"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/App.js":"1","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/Register.js":"2","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/index.js":"3","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/ApolloProvider.js":"4","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/Login.js":"5","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/context/auth.js":"6","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/util/DynamicRoute.js":"7","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/home/Home.js":"8","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/home/Users.js":"9","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/home/ChatContent.js":"10","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/context/message.js":"11","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/home/Message.js":"12"},{"size":973,"mtime":1611322428939,"results":"13","hashOfConfig":"14"},{"size":3123,"mtime":1610062080495,"results":"15","hashOfConfig":"14"},{"size":192,"mtime":1610055821559,"results":"16","hashOfConfig":"14"},{"size":795,"mtime":1611241766525,"results":"17","hashOfConfig":"14"},{"size":2738,"mtime":1611254967292,"results":"18","hashOfConfig":"14"},{"size":1797,"mtime":1612246177876,"results":"19","hashOfConfig":"14"},{"size":421,"mtime":1611240321255,"results":"20","hashOfConfig":"14"},{"size":852,"mtime":1612868020764,"results":"21","hashOfConfig":"14"},{"size":1865,"mtime":1613068024542,"results":"22","hashOfConfig":"14"},{"size":2997,"mtime":1613120336820,"results":"23","hashOfConfig":"14"},{"size":1728,"mtime":1613118017250,"results":"24","hashOfConfig":"14"},{"size":969,"mtime":1613068139059,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"1taoine",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/App.js",[],["54","55"],"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/Register.js",[],"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/index.js",[],["56","57"],"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/ApolloProvider.js",[],["58","59"],"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/Login.js",[],"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/context/auth.js",[],"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/util/DynamicRoute.js",[],"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/home/Home.js",[],"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/home/Users.js",[],"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/home/ChatContent.js",["60","61"],"import React, { Fragment, useEffect, useState } from \"react\";\nimport { gql, useLazyQuery, useMutation } from \"@apollo/client\";\nimport { Col, Form } from \"react-bootstrap\";\n\nimport { useMessageDispatch, useMessageState } from \"../../context/message\";\n\nimport Message from \"./Message\";\n\nconst SEND_MESSAGE = gql`\n\tmutation sendMessage($to: String!, $content: String!) {\n\t\tsendMessage(to: $to, content: $content) {\n\t\t\tuuid\n\t\t\tfrom\n\t\t\tto\n\t\t\tcontent\n\t\t\tcreatedAt\n\t\t}\n\t}\n`;\n\nconst GET_MESSAGES = gql`\n\tquery getMessages($from: String!) {\n\t\tgetMessages(from: $from) {\n\t\t\tuuid\n\t\t\tfrom\n\t\t\tto\n\t\t\tcontent\n\t\t\tcreatedAt\n\t\t}\n\t}\n`;\n\nexport default function Messages() {\n\tconst { users } = useMessageState();\n\tconst dispatch = useMessageDispatch();\n\tconst [content, setContent] = useState(\"\");\n\n\tconst selectedUser = users?.find((u) => u.selected === true);\n\tconst messages = selectedUser?.messages;\n\n\tconst [\n\t\tgetMessages,\n\t\t{ loading: messagesLoading, data: messagesData },\n\t] = useLazyQuery(GET_MESSAGES);\n\n\tconst [sendMessage] = useMutation(SEND_MESSAGE, {\n\t\tonCompleted: (data) =>\n\t\t\tdispatch({\n\t\t\t\ttype: \"ADD_MESSAGE\",\n\t\t\t\tpayload: {\n\t\t\t\t\tusername: selectedUser.username,\n\t\t\t\t\tmessage: data.sendMessage,\n\t\t\t\t},\n\t\t\t}),\n\t\tonError: (err) => console.log(err),\n\t});\n\n\tuseEffect(() => {\n\t\tif (selectedUser && !selectedUser.messages) {\n\t\t\tgetMessages({ variables: { from: selectedUser.username } });\n\t\t}\n\t}, [selectedUser]);\n\n\tuseEffect(() => {\n\t\tif (messagesData) {\n\t\t\tdispatch({\n\t\t\t\ttype: \"SET_USER_MESSAGES\",\n\t\t\t\tpayload: {\n\t\t\t\t\tusername: selectedUser.username,\n\t\t\t\t\tmessages: messagesData.getMessages,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}, [messagesData]);\n\n\tconst submitMessage = (e) => {\n\t\te.preventDefault();\n\t\tif (content === \"\" || !selectedUser) return;\n\n\t\tsetContent(\"\");\n\t\t//mutation for sending the message\n\t\tsendMessage({ variables: { to: selectedUser.username, content } });\n\t};\n\n\tlet selectedChatMarkup;\n\tif (!messages && !messagesLoading) {\n\t\tselectedChatMarkup = <p className=\"info-text\">Select a friend</p>;\n\t} else if (messagesLoading) {\n\t\tselectedChatMarkup = <p className=\"info-text\">Loading..</p>;\n\t} else if (messages.length > 0) {\n\t\tselectedChatMarkup = messages.map((message, index) => (\n\t\t\t<Fragment key={message.uuid}>\n\t\t\t\t<Message message={message} />\n\t\t\t\t{index === messages.length - 1 && (\n\t\t\t\t\t<div className=\"invisible\">\n\t\t\t\t\t\t<hr className=\"m-0\" />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</Fragment>\n\t\t));\n\t} else if (messages.length === 0) {\n\t\tselectedChatMarkup = <p>You are now connected! send your first message!</p>;\n\t}\n\n\treturn (\n\t\t<Col xs={10} md={8}>\n\t\t\t<div className=\"messages-box d-flex flex-column-reverse\">\n\t\t\t\t{selectedChatMarkup}\n\t\t\t</div>\n\t\t\t{/* <div> */}\n\t\t\t<Form onSubmit={submitMessage}>\n\t\t\t\t<Form.Group>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"message-input rounded-pill p-4 bg-secondary border-0\"\n\t\t\t\t\t\tplaceholder=\"Type a message...\"\n\t\t\t\t\t\tvalue={content}\n\t\t\t\t\t\tonChange={(e) => setContent(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Group>\n\t\t\t</Form>\n\t\t\t{/* </div> */}\n\t\t</Col>\n\t);\n}\n","/Users/antran/Documents/CODE/AN/An-chat-app/client/src/context/message.js",[],"/Users/antran/Documents/CODE/AN/An-chat-app/client/src/pages/home/Message.js",[],{"ruleId":"62","replacedBy":"63"},{"ruleId":"64","replacedBy":"65"},{"ruleId":"62","replacedBy":"66"},{"ruleId":"64","replacedBy":"67"},{"ruleId":"62","replacedBy":"68"},{"ruleId":"64","replacedBy":"69"},{"ruleId":"70","severity":1,"message":"71","line":62,"column":5,"nodeType":"72","endLine":62,"endColumn":19,"suggestions":"73"},{"ruleId":"70","severity":1,"message":"74","line":74,"column":5,"nodeType":"72","endLine":74,"endColumn":19,"suggestions":"75"},"no-native-reassign",["76"],"no-negated-in-lhs",["77"],["76"],["77"],["76"],["77"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getMessages'. Either include it or remove the dependency array.","ArrayExpression",["78"],"React Hook useEffect has missing dependencies: 'dispatch' and 'selectedUser.username'. Either include them or remove the dependency array.",["79"],"no-global-assign","no-unsafe-negation",{"desc":"80","fix":"81"},{"desc":"82","fix":"83"},"Update the dependencies array to be: [getMessages, selectedUser]",{"range":"84","text":"85"},"Update the dependencies array to be: [dispatch, messagesData, selectedUser.username]",{"range":"86","text":"87"},[1392,1406],"[getMessages, selectedUser]",[1612,1626],"[dispatch, messagesData, selectedUser.username]"]